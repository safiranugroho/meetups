<html>
<head>
  <title>Weekly Meetups</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    p, a {
      margin: 0;
      line-height: 17px;
      font-size: 13px;
      font-family: Arial, sans-serif;
    }
    a {
      color: royalblue;
    }
    .description {
      color: gray;
    }
    .date {
      font-weight: bold;
      margin: 10px 0;
    }
    .events-by-date {
      margin-bottom: 20px;
    }
    .events-list {
      padding-inline-start: 20px;
    }
    .event {
      margin: 8px 0;
    }
  </style>
</head>
<body>
 <% @events_by_date.each do |date, events| %>
  <div class="events-by-date">
    <p class="date"><%= date %></p>
    <ul class="events-list">
      <% events.each do |event| %>
      <% venue_name = event['venue']['name'] unless event['venue'].nil? %>
      <% group_name = event['group']['name'] unless event['group'].nil? %>
      <li class="event">
        <% background_color = 'lemonchiffon' if venue_name.include? 'ThoughtWorks' unless venue_name.nil? %>
        <% background_color = 'lemonchiffon' if group_name.include? 'ThoughtWorks' unless group_name.nil? %>
        <p><span style="background: <%= background_color || 'initial' %>">
          <a href="<%= event['link'] %>"><%= event['name'] %></a>
          <span class="description">at </span><%= venue_name %>
        </span></p>
         <p><span style="background: <%= background_color || 'initial' %>">
          <span class="description">by </span><%= group_name %>
        </span></p>
      </li>
      <% end unless events.nil?%>
    </ul>
  </div>
  <% end unless @events_by_date.nil? %>
</body>

</html>